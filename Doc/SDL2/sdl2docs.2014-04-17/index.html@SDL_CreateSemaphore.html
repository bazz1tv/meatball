<!DOCTYPE html><html><head><title>SDL2 Documentation - SDL_CreateSemaphore</title><meta charset="utf-8"><link rel="stylesheet" type="text/css" media="all" href="common.css"><link rel="stylesheet" type="text/css" media="screen" href="screen.css"></head><body><div id="sidebar">
<h1 id="wikinavigationheader">Wiki Navigation</h1>
<div class="sidepanel" id="sitenamelogo">
<div style="text-align:center"><a target="sdlpage" href="http://www.libsdl.org"><img src="logo.png" alt="SDL Logo"></a></div>
</div>
<ul id="wikiNavMenu">
<li class="sidepanel" id="sidebarSearch"><a href="index.html@SDL_CreateSemaphore.html#" id="searchFormClose" onclick="return hideSearchForm()">
</a>Search Wiki
<form id="searchform" method="get" onsubmit="document.location.href='index.html@'+document.getElementById('searchinput').value+'.html';return false;">
<div>
<label style="display: none;" for="searchinput">Search:</label>
<input class="disabled" id="searchinput" name="value" value="" size="20" type="text">
<input id="titlesearch" name="titlesearch" value="Titles" style="visibility:hidden" type="submit">
</div>
</form>
</li><li>
</li><li id="sidewaysSearch"><a href="index.html@SDL_CreateSemaphore.html#" onclick="showSearchForm()">Search &gt;</a></li> 
<li class="sidepanel">Navigation Links<ul id="navibar"><li class="wikilink current"><a href="index.html@FrontPage.html">FrontPage</a></li><li class="wikilink"><a href="index.html@Introduction.html">Introduction</a></li><li class="wikilink"><a href="index.html@Support.html">Support</a></li><li class="wikilink"><a href="index.html@CategoryAPI.html">API By Name</a></li><li class="wikilink"><a href="index.html@APIByCategory.html">API By Category</a></li></ul></li>
</ul>
</div><div class="sdl" id="content" lang="en"><span class="anchor" id=
"top"></span> <span class="anchor" id="line-1"></span><span class=
"anchor" id="line-2"></span><span class="anchor" id=
"line-3"></span><span class="anchor" id="line-4"></span>
<p class="line867"></p>
<h1 id="SDL_CreateSemaphore-1">SDL_CreateSemaphore</h1>
<span class="anchor" id="line-5"></span>
<p class="line874">Use this function to create a semaphore.
<span class="anchor" id="line-6"></span><span class="anchor" id=
"line-7"></span></p>
<p class="line867"></p>
<div class="table-of-contents">
<p class="table-of-contents-heading">Contents</p>
<ol>
<li><a href="index.html@SDL_CreateSemaphore.html#SDL_CreateSemaphore-1">SDL_CreateSemaphore</a>
<ol>
<li><a href="index.html@SDL_CreateSemaphore.html#Syntax">Syntax</a></li>
<li><a href="index.html@SDL_CreateSemaphore.html#Function_Parameters">Function Parameters</a></li>
<li><a href="index.html@SDL_CreateSemaphore.html#Return_Value">Return Value</a></li>
<li><a href="index.html@SDL_CreateSemaphore.html#Code_Examples">Code Examples</a></li>
<li><a href="index.html@SDL_CreateSemaphore.html#Remarks">Remarks</a></li>
<li><a href="index.html@SDL_CreateSemaphore.html#Related_Functions">Related Functions</a></li>
</ol>
</li>
</ol>
</div>
<span class="anchor" id="line-8"></span><span class="anchor" id=
"line-9"></span>
<p class="line867"></p>
<h2 id="Syntax">Syntax</h2>
<span class="anchor" id="line-10"></span>
<p class="line867"><span class="anchor" id=
"line-11"></span><span class="anchor" id="line-12"></span></p>
<div class="codearea" dir="ltr" lang="en"> 
<pre dir="ltr" id="CA-pygments_370" lang="en">
<span class="line"><span class="n">SDL_sem</span><span class=
"o">*</span> <span class="n">SDL_CreateSemaphore</span><span class=
"p">(</span><span class="n">Uint32</span> <span class=
"n">initial_value</span><span class="p">)</span>
</span>
</pre></div>
<span class="anchor" id="line-13"></span><span class="anchor" id=
"line-14"></span>
<p class="line867"></p>
<h2 id="Function_Parameters">Function Parameters</h2>
<span class="anchor" id="line-15"></span>
<div>
<table>
<tbody>
<tr>
<td>
<p class="line891"><strong>initial_value</strong></p>
</td>
<td>
<p class="line862">the starting value of the semaphore</p>
</td>
</tr>
</tbody>
</table>
</div>
<span class="anchor" id="line-16"></span><span class="anchor" id=
"line-17"></span>
<p class="line867"></p>
<h2 id="Return_Value">Return Value</h2>
<span class="anchor" id="line-18"></span>
<p class="line862">Returns a new semaphore or NULL on failure; call
<a href="index.html@SDL_GetError.html">SDL_GetError</a>() for more information.
<span class="anchor" id="line-19"></span><span class="anchor" id=
"line-20"></span></p>
<p class="line867"></p>
<h2 id="Code_Examples">Code Examples</h2>
<span class="anchor" id="line-21"></span>
<p class="line867"><span class="anchor" id="line-22"></span></p>
<p class="line874">Typical use of semaphores: <span class="anchor"
id="line-23"></span><span class="anchor" id=
"line-24"></span><span class="anchor" id=
"line-25"></span><span class="anchor" id=
"line-26"></span><span class="anchor" id=
"line-27"></span><span class="anchor" id=
"line-28"></span><span class="anchor" id=
"line-29"></span><span class="anchor" id=
"line-30"></span><span class="anchor" id=
"line-31"></span><span class="anchor" id=
"line-32"></span><span class="anchor" id=
"line-33"></span><span class="anchor" id=
"line-34"></span><span class="anchor" id=
"line-35"></span><span class="anchor" id=
"line-36"></span><span class="anchor" id=
"line-37"></span><span class="anchor" id=
"line-38"></span><span class="anchor" id=
"line-39"></span><span class="anchor" id=
"line-40"></span><span class="anchor" id=
"line-41"></span><span class="anchor" id=
"line-42"></span><span class="anchor" id=
"line-43"></span><span class="anchor" id=
"line-44"></span><span class="anchor" id=
"line-45"></span><span class="anchor" id=
"line-46"></span><span class="anchor" id=
"line-47"></span><span class="anchor" id=
"line-48"></span><span class="anchor" id=
"line-49"></span><span class="anchor" id="line-50"></span></p>
<div class="codearea" dir="ltr" lang="en">
<pre dir="ltr" id="CA-pygments_371" lang="en">
<span class="line"><span class="n">SDL_atomic_t</span> <span class=
"n">done</span><span class="p">;</span>
</span><span class="line"><span class=
"n">SDL_sem</span> <span class="o">*</span><span class=
"n">sem</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class=
"n">SDL_AtomicSet</span><span class="p">(</span><span class=
"o">&amp;</span><span class="n">done</span><span class=
"p">,</span> <span class="mi">0</span><span class="p">);</span>
</span><span class="line"><span class="n">sem</span> <span class=
"o">=</span> <span class="n">SDL_CreateSemaphore</span><span class=
"p">(</span><span class="mi">0</span><span class="p">);</span>
</span><span class="line"><span class="p">.</span>
</span><span class="line"><span class="p">.</span>
</span><span class="line"><span class=
"n">Thread</span> <span class="n">A</span><span class="o">:</span>
</span><span class="line">    <span class=
"k">while</span> <span class="p">(</span><span class=
"o">!</span><span class="n">SDL_AtomicGet</span><span class=
"p">(</span><span class="o">&amp;</span><span class=
"n">done</span><span class="p">))</span> <span class="p">{</span>
</span><span class="line">        <span class=
"n">add_data_to_queue</span><span class="p">();</span>
</span><span class="line">        <span class=
"n">SDL_SemPost</span><span class="p">(</span><span class=
"n">sem</span><span class="p">);</span>
</span><span class="line">    <span class="p">}</span>
</span><span class="line">
</span><span class="line"><span class=
"n">Thread</span> <span class="n">B</span><span class="o">:</span>
</span><span class="line">    <span class=
"k">while</span> <span class="p">(</span><span class=
"o">!</span><span class="n">SDL_AtomicGet</span><span class=
"p">(</span><span class="o">&amp;</span><span class=
"n">done</span><span class="p">))</span> <span class="p">{</span>
</span><span class="line">        <span class=
"n">SDL_SemWait</span><span class="p">(</span><span class=
"n">sem</span><span class="p">);</span>
</span><span class="line">        <span class=
"k">if</span> <span class="p">(</span><span class=
"n">data_available</span><span class="p">())</span> <span class=
"p">{</span>
</span><span class="line">            <span class=
"n">get_data_from_queue</span><span class="p">();</span>
</span><span class="line">        <span class="p">}</span>
</span><span class="line">    <span class="p">}</span>
</span><span class="line"><span class="p">.</span>
</span><span class="line"><span class="p">.</span>
</span><span class="line"><span class=
"n">SDL_AtomicSet</span><span class="p">(</span><span class=
"o">&amp;</span><span class="n">done</span><span class=
"p">,</span> <span class="mi">1</span><span class="p">);</span>
</span><span class="line"><span class=
"n">SDL_SemPost</span><span class="p">(</span><span class=
"n">sem</span><span class="p">);</span>
</span><span class="line"><span class=
"n">wait_for_threads</span><span class="p">();</span>
</span><span class="line"><span class=
"n">SDL_DestroySemaphore</span><span class="p">(</span><span class=
"n">sem</span><span class="p">);</span>
</span>
</pre></div>
<span class="anchor" id="line-51"></span>
<p class="line867"><span class="anchor" id=
"line-52"></span><span class="anchor" id="line-53"></span></p>
<p class="line867"></p>
<h2 id="Remarks">Remarks</h2>
<span class="anchor" id="line-54"></span>
<p class="line862">This function creates a new semaphore and
initializes it with the value <strong>initial_value</strong>. Each
wait operation on the semaphore will atomically decrement the
semaphore value and potentially block if the semaphore value is 0.
Each post operation will atomically increment the semaphore value
and wake waiting threads and allow them to retry the wait
operation. <span class="anchor" id="line-55"></span><span class=
"anchor" id="line-56"></span></p>
<p class="line867"></p>
<h2 id="Related_Functions">Related Functions</h2>
<span class="anchor" id="line-57"></span>
<ul>
<li style="list-style-type:none">
<p class="line891"><a href="index.html@SDL_DestroySemaphore.html">SDL_DestroySemaphore</a> <span class=
"anchor" id="line-58"></span></p>
</li>
<li style="list-style-type:none">
<p class="line891"><a href="index.html@SDL_SemPost.html">SDL_SemPost</a>
<span class="anchor" id="line-59"></span></p>
</li>
<li style="list-style-type:none">
<p class="line891"><a href="index.html@SDL_SemTryWait.html">SDL_SemTryWait</a>
<span class="anchor" id="line-60"></span></p>
</li>
<li style="list-style-type:none">
<p class="line891"><a href="index.html@SDL_SemValue.html">SDL_SemValue</a>
<span class="anchor" id="line-61"></span></p>
</li>
<li style="list-style-type:none">
<p class="line891"><a href="index.html@SDL_SemWait.html">SDL_SemWait</a>
<span class="anchor" id="line-62"></span></p>
</li>
<li style="list-style-type:none">
<p class="line891"><a href="index.html@SDL_SemWaitTimeout.html">SDL_SemWaitTimeout</a> <span class="anchor"
id="line-63"></span><span class="anchor" id="line-64"></span></p>
</li>
</ul>
<p class="line867"></p>
<hr/>
<p class="line874"><span class="anchor" id=
"line-65"></span><a href="index.html@CategoryAPI.html">CategoryAPI</a>, <a href="index.html@CategoryMutex.html">CategoryMutex</a> <span class="anchor" id=
"line-66"></span><span class="anchor" id="bottom"></span></p>
</div>
</body></html>