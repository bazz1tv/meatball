<!DOCTYPE html><html><head><title>SDL2 Documentation - CategoryForceFeedback</title><meta charset="utf-8"><link rel="stylesheet" type="text/css" media="all" href="common.css"><link rel="stylesheet" type="text/css" media="screen" href="screen.css"></head><body><div id="sidebar">
<h1 id="wikinavigationheader">Wiki Navigation</h1>
<div class="sidepanel" id="sitenamelogo">
<div style="text-align:center"><a target="sdlpage" href="http://www.libsdl.org"><img src="logo.png" alt="SDL Logo"></a></div>
</div>
<ul id="wikiNavMenu">
<li class="sidepanel" id="sidebarSearch"><a href="index.html@CategoryForceFeedback.html#" id="searchFormClose" onclick="return hideSearchForm()">
</a>Search Wiki
<form id="searchform" method="get" onsubmit="document.location.href='index.html@'+document.getElementById('searchinput').value+'.html';return false;">
<div>
<label style="display: none;" for="searchinput">Search:</label>
<input class="disabled" id="searchinput" name="value" value="" size="20" type="text">
<input id="titlesearch" name="titlesearch" value="Titles" style="visibility:hidden" type="submit">
</div>
</form>
</li><li>
</li><li id="sidewaysSearch"><a href="index.html@CategoryForceFeedback.html#" onclick="showSearchForm()">Search &gt;</a></li> 
<li class="sidepanel">Navigation Links<ul id="navibar"><li class="wikilink current"><a href="index.html@FrontPage.html">FrontPage</a></li><li class="wikilink"><a href="index.html@Introduction.html">Introduction</a></li><li class="wikilink"><a href="index.html@Support.html">Support</a></li><li class="wikilink"><a href="index.html@CategoryAPI.html">API By Name</a></li><li class="wikilink"><a href="index.html@APIByCategory.html">API By Category</a></li></ul></li>
</ul>
</div><div class="sdl" id="content" lang="en"><span class="anchor" id=
"top"></span> <span class="anchor" id="line-1"></span><span class=
"anchor" id="line-2"></span><span class="anchor" id=
"line-3"></span><span class="anchor" id=
"line-4"></span><span class="anchor" id=
"line-5"></span><span class="anchor" id="line-6"></span>
<p class="line867"></p>
<h1 id="Force_Feedback_Support">Force Feedback Support</h1>
<span class="anchor" id="line-7"></span><span class="anchor" id=
"line-8"></span>
<p class="line867"><strong>Include File(s):</strong> <a class=
"http" href=
"http://hg.libsdl.org/SDL/file/default/include/SDL_haptic.h">SDL_haptic.h</a>
<span class="anchor" id="line-9"></span><span class="anchor" id=
"line-10"></span></p>
<p class="line867"></p>
<div class="table-of-contents">
<p class="table-of-contents-heading">Contents</p>
<ol>
<li><a href="index.html@CategoryForceFeedback.html#Force_Feedback_Support">Force Feedback Support</a>
<ol>
<li><a href="index.html@CategoryForceFeedback.html#Introduction">Introduction</a></li>
<li><a href="index.html@CategoryForceFeedback.html#Code_Examples">Code Examples</a></li>
<li><a href="index.html@CategoryForceFeedback.html#Structures">Structures</a></li>
<li><a href="index.html@CategoryForceFeedback.html#Functions">Functions</a></li>
</ol>
</li>
</ol>
</div>
<span class="anchor" id="line-11"></span><span class="anchor" id=
"line-12"></span>
<p class="line867"></p>
<h2 id="Introduction">Introduction</h2>
<span class="anchor" id="line-13"></span><span class="anchor" id=
"line-14"></span>
<p class="line874">The SDL Haptic subsystem allows you to control
haptic (force feedback) devices. <span class="anchor" id=
"line-15"></span><span class="anchor" id="line-16"></span></p>
<p class="line874">The basic usage is as follows: <span class=
"anchor" id="line-17"></span><span class="anchor" id=
"line-18"></span></p>
<ol type="1">
<li>Initialize the Subsystem (SDL_INIT_HAPTIC) <span class="anchor"
id="line-19"></span></li>
<li>Open a Haptic Device <span class="anchor" id="line-20"></span>
<ol type="a">
<li>
<p class="line891"><a href="index.html@SDL_HapticOpen.html">SDL_HapticOpen</a>()
to open from index <span class="anchor" id="line-21"></span></p>
</li>
<li>
<p class="line891"><a href="index.html@SDL_HapticOpenFromJoystick.html">SDL_HapticOpenFromJoystick</a>() to
open from an existing joystick <span class="anchor" id=
"line-22"></span></p>
</li>
</ol>
</li>
<li>
<p class="line862">Create an effect (<a href="index.html@SDL_HapticEffect.html">SDL_HapticEffect</a>) <span class="anchor" id=
"line-23"></span></p>
</li>
<li>
<p class="line862">Upload the effect with <a href="index.html@SDL_HapticNewEffect.html">SDL_HapticNewEffect</a>() <span class=
"anchor" id="line-24"></span></p>
</li>
<li>
<p class="line862">Run the effect with <a href="index.html@SDL_HapticRunEffect.html">SDL_HapticRunEffect</a>() <span class=
"anchor" id="line-25"></span></p>
</li>
<li>
<p class="line862">(optional) Free the effect with <a href="index.html@SDL_HapticDestroyEffect.html">SDL_HapticDestroyEffect</a>()
<span class="anchor" id="line-26"></span></p>
</li>
<li>
<p class="line862">Close the haptic device with <a href="index.html@SDL_HapticClose.html">SDL_HapticClose</a>() <span class="anchor" id=
"line-27"></span><span class="anchor" id="line-28"></span></p>
</li>
</ol>
<p class="line867"></p>
<h2 id="Code_Examples">Code Examples</h2>
<span class="anchor" id="line-29"></span>
<p class="line874">Simple rumble example: <span class="anchor" id=
"line-30"></span><span class="anchor" id=
"line-31"></span><span class="anchor" id=
"line-32"></span><span class="anchor" id=
"line-33"></span><span class="anchor" id=
"line-34"></span><span class="anchor" id=
"line-35"></span><span class="anchor" id=
"line-36"></span><span class="anchor" id=
"line-37"></span><span class="anchor" id=
"line-38"></span><span class="anchor" id=
"line-39"></span><span class="anchor" id=
"line-40"></span><span class="anchor" id=
"line-41"></span><span class="anchor" id=
"line-42"></span><span class="anchor" id=
"line-43"></span><span class="anchor" id=
"line-44"></span><span class="anchor" id=
"line-45"></span><span class="anchor" id=
"line-46"></span><span class="anchor" id=
"line-47"></span><span class="anchor" id=
"line-48"></span><span class="anchor" id="line-49"></span></p>
<div class="codearea" dir="ltr" lang="en"> 
<pre dir="ltr" id="CA-pygments_585" lang="en">
<span class="line"><span class="n">SDL_Haptic</span> <span class=
"o">*</span><span class="n">haptic</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class=
"c1">// Open the device</span>
</span><span class="line"><span class=
"n">haptic</span> <span class="o">=</span> <span class=
"n">SDL_HapticOpen</span><span class="p">(</span> <span class=
"mi">0</span> <span class="p">);</span>
</span><span class="line"><span class="k">if</span> <span class=
"p">(</span><span class="n">haptic</span> <span class=
"o">==</span> <span class="nb">NULL</span><span class="p">)</span>
</span><span class="line">   <span class=
"k">return</span> <span class="o">-</span><span class=
"mi">1</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class=
"c1">// Initialize simple rumble</span>
</span><span class="line"><span class="k">if</span> <span class=
"p">(</span><span class="n">SDL_HapticRumbleInit</span><span class=
"p">(</span> <span class="n">haptic</span> <span class=
"p">)</span> <span class="o">!=</span> <span class=
"mi">0</span><span class="p">)</span>
</span><span class="line">   <span class=
"k">return</span> <span class="o">-</span><span class=
"mi">1</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class=
"c1">// Play effect at 50% strength for 2 seconds</span>
</span><span class="line"><span class="k">if</span> <span class=
"p">(</span><span class="n">SDL_HapticRumblePlay</span><span class=
"p">(</span> <span class="n">haptic</span><span class=
"p">,</span> <span class="mf">0.5</span><span class=
"p">,</span> <span class="mi">2000</span> <span class=
"p">)</span> <span class="o">!=</span> <span class=
"mi">0</span><span class="p">)</span>
</span><span class="line">   <span class=
"k">return</span> <span class="o">-</span><span class=
"mi">1</span><span class="p">;</span>
</span><span class="line"><span class=
"n">SDL_Delay</span><span class="p">(</span> <span class=
"mi">2000</span> <span class="p">);</span>
</span><span class="line">
</span><span class="line"><span class="c1">// Clean up</span>
</span><span class="line"><span class=
"n">SDL_HapticClose</span><span class="p">(</span> <span class=
"n">haptic</span> <span class="p">);</span>
</span>
</pre></div>
<span class="anchor" id="line-50"></span><span class="anchor" id=
"line-51"></span>
<p class="line874">Complete example: <span class="anchor" id=
"line-52"></span><span class="anchor" id=
"line-53"></span><span class="anchor" id=
"line-54"></span><span class="anchor" id=
"line-55"></span><span class="anchor" id=
"line-56"></span><span class="anchor" id=
"line-57"></span><span class="anchor" id=
"line-58"></span><span class="anchor" id=
"line-59"></span><span class="anchor" id=
"line-60"></span><span class="anchor" id=
"line-61"></span><span class="anchor" id=
"line-62"></span><span class="anchor" id=
"line-63"></span><span class="anchor" id=
"line-64"></span><span class="anchor" id=
"line-65"></span><span class="anchor" id=
"line-66"></span><span class="anchor" id=
"line-67"></span><span class="anchor" id=
"line-68"></span><span class="anchor" id=
"line-69"></span><span class="anchor" id=
"line-70"></span><span class="anchor" id=
"line-71"></span><span class="anchor" id=
"line-72"></span><span class="anchor" id=
"line-73"></span><span class="anchor" id=
"line-74"></span><span class="anchor" id=
"line-75"></span><span class="anchor" id=
"line-76"></span><span class="anchor" id=
"line-77"></span><span class="anchor" id=
"line-78"></span><span class="anchor" id=
"line-79"></span><span class="anchor" id=
"line-80"></span><span class="anchor" id=
"line-81"></span><span class="anchor" id=
"line-82"></span><span class="anchor" id=
"line-83"></span><span class="anchor" id=
"line-84"></span><span class="anchor" id=
"line-85"></span><span class="anchor" id=
"line-86"></span><span class="anchor" id=
"line-87"></span><span class="anchor" id=
"line-88"></span><span class="anchor" id=
"line-89"></span><span class="anchor" id=
"line-90"></span><span class="anchor" id=
"line-91"></span><span class="anchor" id=
"line-92"></span><span class="anchor" id=
"line-93"></span><span class="anchor" id="line-94"></span></p>
<div class="codearea" dir="ltr" lang="en">
<pre dir="ltr" id="CA-pygments_586" lang="en">
<span class="line"><span class="kt">int</span> <span class=
"nf">test_haptic</span><span class="p">(</span> <span class=
"n">SDL_Joystick</span> <span class="o">*</span> <span class=
"n">joystick</span> <span class="p">)</span> <span class=
"p">{</span>
</span><span class="line"> <span class=
"n">SDL_Haptic</span> <span class="o">*</span><span class=
"n">haptic</span><span class="p">;</span>
</span><span class="line"> <span class=
"n">SDL_HapticEffect</span> <span class=
"n">effect</span><span class="p">;</span>
</span><span class="line"> <span class="kt">int</span> <span class=
"n">effect_id</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"> <span class=
"c1">// Open the device</span>
</span><span class="line"> <span class=
"n">haptic</span> <span class="o">=</span> <span class=
"n">SDL_HapticOpenFromJoystick</span><span class=
"p">(</span> <span class="n">joystick</span> <span class=
"p">);</span>
</span><span class="line"> <span class="k">if</span> <span class=
"p">(</span><span class="n">haptic</span> <span class=
"o">==</span> <span class="nb">NULL</span><span class=
"p">)</span> <span class="k">return</span> <span class=
"o">-</span><span class="mi">1</span><span class=
"p">;</span> <span class=
"c1">// Most likely joystick isn't haptic</span>
</span><span class="line">
</span><span class="line"> <span class=
"c1">// See if it can do sine waves</span>
</span><span class="line"> <span class="k">if</span> <span class=
"p">((</span><span class="n">SDL_HapticQuery</span><span class=
"p">(</span><span class="n">haptic</span><span class=
"p">)</span> <span class="o">&amp;</span> <span class=
"n">SDL_HAPTIC_SINE</span><span class="p">)</span><span class=
"o">==</span><span class="mi">0</span><span class=
"p">)</span> <span class="p">{</span>
</span><span class="line">  <span class=
"n">SDL_HapticClose</span><span class="p">(</span><span class=
"n">haptic</span><span class="p">);</span> <span class=
"c1">// No sine effect</span>
</span><span class="line">  <span class=
"k">return</span> <span class="o">-</span><span class=
"mi">1</span><span class="p">;</span>
</span><span class="line"> <span class="p">}</span>
</span><span class="line">
</span><span class="line"> <span class=
"c1">// Create the effect</span>
</span><span class="line"> <span class=
"n">memset</span><span class="p">(</span> <span class=
"o">&amp;</span><span class="n">effect</span><span class=
"p">,</span> <span class="mi">0</span><span class=
"p">,</span> <span class="k">sizeof</span><span class=
"p">(</span><span class="n">SDL_HapticEffect</span><span class=
"p">)</span> <span class="p">);</span> <span class=
"c1">// 0 is safe default</span>
</span><span class="line"> <span class=
"n">effect</span><span class="p">.</span><span class=
"n">type</span> <span class="o">=</span> <span class=
"n">SDL_HAPTIC_SINE</span><span class="p">;</span>
</span><span class="line"> <span class=
"n">effect</span><span class="p">.</span><span class=
"n">periodic</span><span class="p">.</span><span class=
"n">direction</span><span class="p">.</span><span class=
"n">type</span> <span class="o">=</span> <span class=
"n">SDL_HAPTIC_POLAR</span><span class="p">;</span> <span class=
"c1">// Polar coordinates</span>
</span><span class="line"> <span class=
"n">effect</span><span class="p">.</span><span class=
"n">periodic</span><span class="p">.</span><span class=
"n">direction</span><span class="p">.</span><span class=
"n">dir</span><span class="p">[</span><span class=
"mi">0</span><span class="p">]</span> <span class=
"o">=</span> <span class="mi">18000</span><span class=
"p">;</span> <span class="c1">// Force comes from south</span>
</span><span class="line"> <span class=
"n">effect</span><span class="p">.</span><span class=
"n">periodic</span><span class="p">.</span><span class=
"n">period</span> <span class="o">=</span> <span class=
"mi">1000</span><span class="p">;</span> <span class=
"c1">// 1000 ms</span>
</span><span class="line"> <span class=
"n">effect</span><span class="p">.</span><span class=
"n">periodic</span><span class="p">.</span><span class=
"n">magnitude</span> <span class="o">=</span> <span class=
"mi">20000</span><span class="p">;</span> <span class=
"c1">// 20000/32767 strength</span>
</span><span class="line"> <span class=
"n">effect</span><span class="p">.</span><span class=
"n">periodic</span><span class="p">.</span><span class=
"n">length</span> <span class="o">=</span> <span class=
"mi">5000</span><span class="p">;</span> <span class=
"c1">// 5 seconds long</span>
</span><span class="line"> <span class=
"n">effect</span><span class="p">.</span><span class=
"n">periodic</span><span class="p">.</span><span class=
"n">attack_length</span> <span class="o">=</span> <span class=
"mi">1000</span><span class="p">;</span> <span class=
"c1">// Takes 1 second to get max strength</span>
</span><span class="line"> <span class=
"n">effect</span><span class="p">.</span><span class=
"n">periodic</span><span class="p">.</span><span class=
"n">fade_length</span> <span class="o">=</span> <span class=
"mi">1000</span><span class="p">;</span> <span class=
"c1">// Takes 1 second to fade away</span>
</span><span class="line">
</span><span class="line"> <span class=
"c1">// Upload the effect</span>
</span><span class="line"> <span class=
"n">effect_id</span> <span class="o">=</span> <span class=
"n">SDL_HapticNewEffect</span><span class="p">(</span> <span class=
"n">haptic</span><span class="p">,</span> <span class=
"o">&amp;</span><span class="n">effect</span> <span class=
"p">);</span>
</span><span class="line">
</span><span class="line"> <span class=
"c1">// Test the effect</span>
</span><span class="line"> <span class=
"n">SDL_HapticRunEffect</span><span class="p">(</span> <span class=
"n">haptic</span><span class="p">,</span> <span class=
"n">effect_id</span><span class="p">,</span> <span class=
"mi">1</span> <span class="p">);</span>
</span><span class="line"> <span class=
"n">SDL_Delay</span><span class="p">(</span> <span class=
"mi">5000</span><span class="p">);</span> <span class=
"c1">// Wait for the effect to finish</span>
</span><span class="line">
</span><span class="line"> <span class=
"c1">// We destroy the effect, although closing the device also does this</span>
</span><span class="line"> <span class=
"n">SDL_HapticDestroyEffect</span><span class=
"p">(</span> <span class="n">haptic</span><span class=
"p">,</span> <span class="n">effect_id</span> <span class=
"p">);</span>
</span><span class="line">
</span><span class="line"> <span class=
"c1">// Close the device</span>
</span><span class="line"> <span class=
"n">SDL_HapticClose</span><span class="p">(</span><span class=
"n">haptic</span><span class="p">);</span>
</span><span class="line">
</span><span class="line"> <span class=
"k">return</span> <span class="mi">0</span><span class=
"p">;</span> <span class="c1">// Success</span>
</span><span class="line"><span class="p">}</span>
</span>
</pre></div>
<span class="anchor" id="line-95"></span>
<p class="line862">You can find more information in this blog by
Edgar Simo Serra: <a class="http" href=
"http://bobbens.dyndns.org/journal/2010/sdl_haptic/">SDL Haptic In
Depth</a> <span class="anchor" id="line-96"></span><span class=
"anchor" id="line-97"></span><span class="anchor" id=
"line-98"></span></p>
<p class="line867"><span class="anchor" id="line-99"></span></p>
<p class="line867"><span class="anchor" id="line-100"></span></p>
<p class="line867"><span class="anchor" id=
"line-101"></span><span class="anchor" id="line-102"></span></p>
<p class="line867"></p>
<h2 id="Structures">Structures</h2>
<span class="anchor" id="line-103"></span>
<p class="line867"></p>
<div class="searchresults">
<ol start="1">
<li><a href="index.html@SDL_HapticCondition.html">
SDL_HapticCondition</a></li>
<li><a href="index.html@SDL_HapticConstant.html">
SDL_HapticConstant</a></li>
<li><a href="index.html@SDL_HapticCustom.html">
SDL_HapticCustom</a></li>
<li><a href="index.html@SDL_HapticDirection.html">
SDL_HapticDirection</a></li>
<li><a href="index.html@SDL_HapticEffect.html">
SDL_HapticEffect</a></li>
<li><a href="index.html@SDL_HapticLeftRight.html">
SDL_HapticLeftRight</a></li>
<li><a href="index.html@SDL_HapticPeriodic.html">
SDL_HapticPeriodic</a></li>
<li><a href="index.html@SDL_HapticRamp.html">
SDL_HapticRamp</a></li>
</ol>
</div>
<span class="anchor" id="line-104"></span><span class="anchor" id=
"line-105"></span>
<p class="line867"></p>
<h2 id="Functions">Functions</h2>
<span class="anchor" id="line-106"></span>
<p class="line867"></p>
<div class="searchresults">
<ol start="1">
<li><a href="index.html@SDL_HapticClose.html">
SDL_HapticClose</a></li>
<li><a href="index.html@SDL_HapticDestroyEffect.html">
SDL_HapticDestroyEffect</a></li>
<li><a href="index.html@SDL_HapticEffectSupported.html">
SDL_HapticEffectSupported</a></li>
<li><a href="index.html@SDL_HapticGetEffectStatus.html">
SDL_HapticGetEffectStatus</a></li>
<li><a href="index.html@SDL_HapticIndex.html">
SDL_HapticIndex</a></li>
<li><a href="index.html@SDL_HapticName.html">
SDL_HapticName</a></li>
<li><a href="index.html@SDL_HapticNewEffect.html">
SDL_HapticNewEffect</a></li>
<li><a href="index.html@SDL_HapticNumAxes.html">
SDL_HapticNumAxes</a></li>
<li><a href="index.html@SDL_HapticNumEffects.html">
SDL_HapticNumEffects</a></li>
<li><a href="index.html@SDL_HapticNumEffectsPlaying.html">
SDL_HapticNumEffectsPlaying</a></li>
<li><a href="index.html@SDL_HapticOpen.html">
SDL_HapticOpen</a></li>
<li><a href="index.html@SDL_HapticOpenFromJoystick.html">
SDL_HapticOpenFromJoystick</a></li>
<li><a href="index.html@SDL_HapticOpenFromMouse.html">
SDL_HapticOpenFromMouse</a></li>
<li><a href="index.html@SDL_HapticOpened.html">
SDL_HapticOpened</a></li>
<li><a href="index.html@SDL_HapticPause.html">
SDL_HapticPause</a></li>
<li><a href="index.html@SDL_HapticQuery.html">
SDL_HapticQuery</a></li>
<li><a href="index.html@SDL_HapticRumbleInit.html">
SDL_HapticRumbleInit</a></li>
<li><a href="index.html@SDL_HapticRumblePlay.html">
SDL_HapticRumblePlay</a></li>
<li><a href="index.html@SDL_HapticRumbleStop.html">
SDL_HapticRumbleStop</a></li>
<li><a href="index.html@SDL_HapticRumbleSupported.html">
SDL_HapticRumbleSupported</a></li>
<li><a href="index.html@SDL_HapticRunEffect.html">
SDL_HapticRunEffect</a></li>
<li><a href="index.html@SDL_HapticSetAutocenter.html">
SDL_HapticSetAutocenter</a></li>
<li><a href="index.html@SDL_HapticSetGain.html">
SDL_HapticSetGain</a></li>
<li><a href="index.html@SDL_HapticStopAll.html">
SDL_HapticStopAll</a></li>
<li><a href="index.html@SDL_HapticStopEffect.html">
SDL_HapticStopEffect</a></li>
<li><a href="index.html@SDL_HapticUnpause.html">
SDL_HapticUnpause</a></li>
<li><a href="index.html@SDL_HapticUpdateEffect.html">
SDL_HapticUpdateEffect</a></li>
<li><a href="index.html@SDL_JoystickIsHaptic.html">
SDL_JoystickIsHaptic</a></li>
<li><a href="index.html@SDL_MouseIsHaptic.html">
SDL_MouseIsHaptic</a></li>
<li><a href="index.html@SDL_NumHaptics.html">
SDL_NumHaptics</a></li>
</ol>
</div>
<span class="anchor" id="line-107"></span><span class="anchor" id=
"line-108"></span>
<p class="line867"></p>
<hr/>
<p class="line874"><span class="anchor" id=
"line-109"></span><a href="index.html@CategoryCategory.html">CategoryCategory</a>
<span class="anchor" id="line-110"></span><span class="anchor" id=
"bottom"></span></p>
</div>
</body></html>