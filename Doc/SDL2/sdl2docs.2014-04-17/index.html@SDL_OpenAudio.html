<!DOCTYPE html><html><head><title>SDL2 Documentation - SDL_OpenAudio</title><meta charset="utf-8"><link rel="stylesheet" type="text/css" media="all" href="common.css"><link rel="stylesheet" type="text/css" media="screen" href="screen.css"></head><body><div id="sidebar">
<h1 id="wikinavigationheader">Wiki Navigation</h1>
<div class="sidepanel" id="sitenamelogo">
<div style="text-align:center"><a target="sdlpage" href="http://www.libsdl.org"><img src="logo.png" alt="SDL Logo"></a></div>
</div>
<ul id="wikiNavMenu">
<li class="sidepanel" id="sidebarSearch"><a href="index.html@SDL_OpenAudio.html#" id="searchFormClose" onclick="return hideSearchForm()">
</a>Search Wiki
<form id="searchform" method="get" onsubmit="document.location.href='index.html@'+document.getElementById('searchinput').value+'.html';return false;">
<div>
<label style="display: none;" for="searchinput">Search:</label>
<input class="disabled" id="searchinput" name="value" value="" size="20" type="text">
<input id="titlesearch" name="titlesearch" value="Titles" style="visibility:hidden" type="submit">
</div>
</form>
</li><li>
</li><li id="sidewaysSearch"><a href="index.html@SDL_OpenAudio.html#" onclick="showSearchForm()">Search &gt;</a></li> 
<li class="sidepanel">Navigation Links<ul id="navibar"><li class="wikilink current"><a href="index.html@FrontPage.html">FrontPage</a></li><li class="wikilink"><a href="index.html@Introduction.html">Introduction</a></li><li class="wikilink"><a href="index.html@Support.html">Support</a></li><li class="wikilink"><a href="index.html@CategoryAPI.html">API By Name</a></li><li class="wikilink"><a href="index.html@APIByCategory.html">API By Category</a></li></ul></li>
</ul>
</div><div class="sdl" id="content" lang="en"><span class="anchor" id=
"top"></span> <span class="anchor" id="line-1"></span><span class=
"anchor" id="line-2"></span><span class="anchor" id=
"line-3"></span>
<p class="line867"></p>
<h1 id="SDL_OpenAudio-1">SDL_OpenAudio</h1>
<span class="anchor" id="line-4"></span>
<p class="line862">This function is a legacy means of opening the
audio device. New programs might want to use <a href="index.html@SDL_OpenAudioDevice.html">SDL_OpenAudioDevice</a>() instead.
<span class="anchor" id="line-5"></span><span class="anchor" id=
"line-6"></span></p>
<p class="line867"></p>
<div class="table-of-contents">
<p class="table-of-contents-heading">Contents</p>
<ol>
<li><a href="index.html@SDL_OpenAudio.html#SDL_OpenAudio-1">SDL_OpenAudio</a>
<ol>
<li><a href="index.html@SDL_OpenAudio.html#Syntax">Syntax</a></li>
<li><a href="index.html@SDL_OpenAudio.html#Function_Parameters">Function Parameters</a></li>
<li><a href="index.html@SDL_OpenAudio.html#Return_Value">Return Value</a></li>
<li><a href="index.html@SDL_OpenAudio.html#Code_Examples">Code Examples</a></li>
<li><a href="index.html@SDL_OpenAudio.html#Remarks">Remarks</a></li>
<li><a href="index.html@SDL_OpenAudio.html#Related_Functions">Related Functions</a></li>
</ol>
</li>
</ol>
</div>
<span class="anchor" id="line-7"></span><span class="anchor" id=
"line-8"></span>
<p class="line867"></p>
<h2 id="Syntax">Syntax</h2>
<span class="anchor" id="line-9"></span>
<p class="line867"><span class="anchor" id=
"line-10"></span><span class="anchor" id="line-11"></span></p>
<div class="codearea" dir="ltr" lang="en"> 
<pre dir="ltr" id="CA-pygments_365" lang="en">
<span class="line"><span class="kt">int</span> <span class=
"n">SDL_OpenAudio</span><span class="p">(</span><span class=
"n">SDL_AudioSpec</span><span class="o">*</span> <span class=
"n">desired</span><span class="p">,</span> <span class=
"n">SDL_AudioSpec</span><span class="o">*</span> <span class=
"n">obtained</span><span class="p">)</span>
</span>
</pre></div>
<span class="anchor" id="line-12"></span><span class="anchor" id=
"line-13"></span>
<p class="line867"></p>
<h2 id="Function_Parameters">Function Parameters</h2>
<span class="anchor" id="line-14"></span>
<div>
<table>
<tbody>
<tr>
<td>
<p class="line891"><strong>desired</strong></p>
</td>
<td>
<p class="line862">an <a href="index.html@SDL_AudioSpec.html">SDL_AudioSpec</a>
structure representing the desired output format</p>
</td>
</tr>
<tr>
<td><span class="anchor" id="line-15"></span>
<p class="line891"><strong>obtained</strong></p>
</td>
<td>
<p class="line862">an <a href="index.html@SDL_AudioSpec.html">SDL_AudioSpec</a>
structure filled in with the actual parameters, or NULL</p>
</td>
</tr>
</tbody>
</table>
</div>
<span class="anchor" id="line-16"></span><span class="anchor" id=
"line-17"></span>
<p class="line867"></p>
<h2 id="Return_Value">Return Value</h2>
<span class="anchor" id="line-18"></span><span class="anchor" id=
"line-19"></span>
<p class="line862">This function opens the audio device with the
desired parameters, and returns 0 if successful, placing the actual
hardware parameters in the structure pointed to by
<strong>obtained</strong>. <span class="anchor" id=
"line-20"></span><span class="anchor" id="line-21"></span></p>
<p class="line862">If <strong>obtained</strong> is NULL, the audio
data passed to the callback function will be guaranteed to be in
the requested format, and will be automatically converted to the
actual hardware audio format if necessary. If
<strong>obtained</strong> is NULL, <strong>desired</strong> will
have fields modified. <span class="anchor" id=
"line-22"></span><span class="anchor" id="line-23"></span></p>
<p class="line862">This function returns a negative error code on
failure to open the audio device or failure to set up the audio
thread; call <a href="index.html@SDL_GetError.html">SDL_GetError</a>() for more
information. <span class="anchor" id="line-24"></span><span class=
"anchor" id="line-25"></span></p>
<p class="line867"></p>
<h2 id="Code_Examples">Code Examples</h2>
<span class="anchor" id="line-26"></span>
<p class="line867"><span class="anchor" id=
"line-27"></span><span class="anchor" id=
"line-28"></span><span class="anchor" id=
"line-29"></span><span class="anchor" id=
"line-30"></span><span class="anchor" id=
"line-31"></span><span class="anchor" id=
"line-32"></span><span class="anchor" id=
"line-33"></span><span class="anchor" id=
"line-34"></span><span class="anchor" id=
"line-35"></span><span class="anchor" id=
"line-36"></span><span class="anchor" id=
"line-37"></span><span class="anchor" id=
"line-38"></span><span class="anchor" id=
"line-39"></span><span class="anchor" id=
"line-40"></span><span class="anchor" id=
"line-41"></span><span class="anchor" id=
"line-42"></span><span class="anchor" id=
"line-43"></span><span class="anchor" id=
"line-44"></span><span class="anchor" id="line-45"></span></p>
<div class="codearea" dir="ltr" lang="en">
<pre dir="ltr" id="CA-pygments_366" lang="en">
<span class="line"><span class=
"n">SDL_AudioSpec</span> <span class="n">want</span><span class=
"p">,</span> <span class="n">have</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class=
"n">SDL_zero</span><span class="p">(</span><span class=
"n">want</span><span class="p">);</span>
</span><span class="line"><span class="n">want</span><span class=
"p">.</span><span class="n">freq</span> <span class=
"o">=</span> <span class="mi">48000</span><span class="p">;</span>
</span><span class="line"><span class="n">want</span><span class=
"p">.</span><span class="n">format</span> <span class=
"o">=</span> <span class="n">AUDIO_F32</span><span class=
"p">;</span>
</span><span class="line"><span class="n">want</span><span class=
"p">.</span><span class="n">channels</span> <span class=
"o">=</span> <span class="mi">2</span><span class="p">;</span>
</span><span class="line"><span class="n">want</span><span class=
"p">.</span><span class="n">samples</span> <span class=
"o">=</span> <span class="mi">4096</span><span class="p">;</span>
</span><span class="line"><span class="n">want</span><span class=
"p">.</span><span class="n">callback</span> <span class=
"o">=</span> <span class="n">MyAudioCallback</span><span class=
"p">;</span>  <span class=
"c1">// you wrote this function elsewhere.</span>
</span><span class="line">
</span><span class="line"><span class="k">if</span> <span class=
"p">(</span><span class="n">SDL_OpenAudio</span><span class=
"p">(</span><span class="o">&amp;</span><span class=
"n">want</span><span class="p">,</span> <span class=
"o">&amp;</span><span class="n">have</span><span class=
"p">)</span> <span class="o">&lt;</span> <span class=
"mi">0</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">    <span class=
"n">printf</span><span class="p">(</span><span class=
"s">"Failed to open audio: %s</span><span class=
"se"></span><span class="s">"</span><span class=
"p">,</span> <span class="n">SDL_GetError</span><span class=
"p">());</span>
</span><span class="line"><span class="p">}</span> <span class=
"k">else</span> <span class="p">{</span>
</span><span class="line">    <span class=
"k">if</span> <span class="p">(</span><span class=
"n">have</span><span class="p">.</span><span class=
"n">format</span> <span class="o">!=</span> <span class=
"n">want</span><span class="p">.</span><span class=
"n">format</span><span class="p">)</span>
</span><span class="line">        <span class=
"n">printf</span><span class="p">(</span><span class=
"s">"We didn't get Float32 audio format.</span><span class=
"se"></span><span class="s">"</span><span class="p">);</span>
</span><span class="line">    <span class=
"n">SDL_PauseAudio</span><span class="p">(</span><span class=
"mi">0</span><span class="p">);</span>  <span class=
"c1">// start audio playing.</span>
</span><span class="line">    <span class=
"n">SDL_Delay</span><span class="p">(</span><span class=
"mi">5000</span><span class="p">);</span>  <span class=
"c1">// let the audio callback play some sound for 5 seconds.</span>
</span><span class="line">    <span class=
"n">SDL_CloseAudio</span><span class="p">();</span>
</span><span class="line"><span class="p">}</span>
</span>
</pre></div>
<span class="anchor" id="line-46"></span><span class="anchor" id=
"line-47"></span>
<p class="line867"></p>
<h2 id="Remarks">Remarks</h2>
<span class="anchor" id="line-48"></span><span class="anchor" id=
"line-49"></span>
<p class="line862">This function remains for compatibility with SDL
1.2, but also because it's slightly easier to use than the new
functions in SDL2. The new, more powerful, and preferred way to do
this is <a href="index.html@SDL_OpenAudioDevice.html">SDL_OpenAudioDevice</a>().
<span class="anchor" id="line-50"></span><span class="anchor" id=
"line-51"></span></p>
<p class="line874">This function is roughly equivalent to:
<span class="anchor" id="line-52"></span><span class="anchor" id=
"line-53"></span><span class="anchor" id="line-54"></span></p>
<div class="codearea" dir="ltr" lang="en">
<pre dir="ltr" id="CA-pygments_367" lang="en">
<span class="line"><span class=
"n">SDL_OpenAudioDevice</span><span class="p">(</span><span class=
"nb">NULL</span><span class="p">,</span> <span class=
"mi">0</span><span class="p">,</span> <span class=
"n">desired</span><span class="p">,</span> <span class=
"n">obtained</span><span class="p">,</span> <span class=
"n">SDL_AUDIO_ALLOW_ANY_CHANGE</span><span class="p">);</span>
</span>
</pre></div>
<span class="anchor" id="line-55"></span><span class="anchor" id=
"line-56"></span>
<p class="line874">With two notable exceptions: <span class=
"anchor" id="line-57"></span></p>
<ul>
<li>
<p class="line862">If <strong>obtained</strong> is NULL, we use
<strong>desired</strong> (and allow no changes), which means
desired will be modified to have the correct values for silence,
etc, and SDL will convert any differences between your app's
specific request and the hardware behind the scenes. <span class=
"anchor" id="line-58"></span></p>
</li>
<li>The return value is always success or failure, and not a device
ID, which means you can only have one device open at a time with
this function. <span class="anchor" id=
"line-59"></span><span class="anchor" id="line-60"></span></li>
</ul>
<p class="line867"></p>
<h2 id="Related_Functions">Related Functions</h2>
<span class="anchor" id="line-61"></span>
<ul>
<li style="list-style-type:none">
<p class="line891"><a href="index.html@SDL_CloseAudio.html">SDL_CloseAudio</a>
<span class="anchor" id="line-62"></span></p>
</li>
<li style="list-style-type:none">
<p class="line891"><a href="index.html@SDL_LockAudio.html">SDL_LockAudio</a>
<span class="anchor" id="line-63"></span></p>
</li>
<li style="list-style-type:none">
<p class="line891"><a href="index.html@SDL_PauseAudio.html">SDL_PauseAudio</a>
<span class="anchor" id="line-64"></span></p>
</li>
<li style="list-style-type:none">
<p class="line891"><a href="index.html@SDL_UnlockAudio.html">SDL_UnlockAudio</a>
<span class="anchor" id="line-65"></span><span class="anchor" id=
"line-66"></span></p>
</li>
</ul>
<p class="line867"></p>
<hr/>
<p class="line874"><span class="anchor" id=
"line-67"></span><a href="index.html@CategoryAPI.html">CategoryAPI</a>, <a href="index.html@CategoryAudio.html">CategoryAudio</a> <span class="anchor" id=
"line-68"></span><span class="anchor" id="bottom"></span></p>
</div>
</body></html>